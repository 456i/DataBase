DECLARE @hdoc INT;  
-- @hdoc — дескриптор XML-документа.
-- Это идентификатор внутреннего представления XML в памяти SQL Server.
-- Используется функцией OPENXML для доступа к подготовленному XML.

DECLARE @xmlData NVARCHAR(MAX) = 
N'<товары>
    <товар Наименование="Тест1" Цена="10" Количество="5"/>
    <товар Наименование="Тест2" Цена="20" Количество="10"/>
    <товар Наименование="Тест3" Цена="30" Количество="15"/>
</товары>';

EXEC sp_xml_preparedocument @hdoc OUTPUT, @xmlData;
-- Процедура разбирает XML-документ и загружает его в память SQL Server.
-- В переменную @hdoc возвращается дескриптор подготовленного XML.
-- Без этого шага функция OPENXML работать не может.

INSERT INTO Товары (Наименование, Цена, Количество)

SELECT [Наименование], [Цена], [Количество]

FROM OPENXML(@hdoc, N'/товары/товар', 0)
-- Режим 0 — атрибутивная модель сопоставления:
-- данные извлекаются из атрибутов XML-элементов

WITH (
    Наименование NVARCHAR(40) N'@Наименование',


    Цена REAL N'@Цена',


    Количество INT N'@Количество'

);

EXEC sp_xml_removedocument @hdoc;
-- Освобождение ресурсов.
-- Удаляет XML-документ из памяти SQL Server.
-- Обязательный шаг для предотвращения утечек памяти.

SELECT * FROM Товары WHERE Наименование LIKE N'Тест%';