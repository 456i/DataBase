<ShowPlanXML xmlns="http://schemas.microsoft.com/sqlserver/2004/07/showplan" Version="1.564"
    Build="16.0.4210.1">
    <BatchSequence>
        <Batch>
            <Statements>
                <StmtSimple
                    StatementText="-- Индекс покрытия&#xa;-- DROP TABLE #EXPLRE;&#xa;-- &#xa;-- CREATE TABLE #EXPLRE (&#xa;--     id INT,&#xa;--     val INT,&#xa;--     description NVARCHAR(100),&#xa;--     category NVARCHAR(50)&#xa;-- );&#xa;-- &#xa;-- Быстрая вставка 20000 строк&#xa;-- ;WITH Numbers AS (&#xa;--     SELECT 1 AS num&#xa;--     UNION ALL&#xa;--     SELECT num + 1&#xa;--     FROM Numbers&#xa;--     WHERE num &lt; 20000&#xa;-- )&#xa;-- INSERT INTO #EXPLRE (id, val, description, category)&#xa;-- SELECT &#xa;--     num,&#xa;--     num,&#xa;--     &apos;Описание_&apos; + CAST(num AS NVARCHAR(10)),&#xa;--     CASE WHEN num % 3 = 0 THEN &apos;A&apos; WHEN num % 3 = 1 THEN &apos;B&apos; ELSE &apos;C&apos; END&#xa;-- FROM Numbers&#xa;-- OPTION (MAXRECURSION 0);&#xa;-- &#xa;-- Создаем индекс покрытия&#xa;-- CREATE NONCLUSTERED INDEX IX_EXPLRE_Covering ON #EXPLRE(val) INCLUDE (description, category);&#xa;-- &#xa;-- CHECKPOINT;&#xa;-- DBCC DROPCLEANBUFFERS;&#xa;-- SET STATISTICS TIME ON;&#xa;-- SET SHOWPLAN_XML ON;&#xa;-- &#xa;-- Запрос, который использует покрытие&#xa;SELECT val, description, category &#xa;FROM #EXPLRE &#xa;WHERE val &lt; 10000"
                    StatementId="1" StatementCompId="1" StatementType="SELECT"
                    RetrievedFromCache="false" StatementSubTreeCost="0.062429"
                    StatementEstRows="9999" SecurityPolicyApplied="false"
                    StatementOptmLevel="TRIVIAL" QueryHash="0xFED9C0E581B8177D"
                    QueryPlanHash="0x8849DE334D8FBCBB" CardinalityEstimationModelVersion="160">
                    <StatementSetOptions QUOTED_IDENTIFIER="true" ARITHABORT="false"
                        CONCAT_NULL_YIELDS_NULL="true" ANSI_NULLS="true" ANSI_PADDING="true"
                        ANSI_WARNINGS="true" NUMERIC_ROUNDABORT="false"></StatementSetOptions>
                    <QueryPlan CachedPlanSize="16" CompileTime="1" CompileCPU="1"
                        CompileMemory="120">
                        <MemoryGrantInfo SerialRequiredMemory="0" SerialDesiredMemory="0"
                            GrantedMemory="0" MaxUsedMemory="0"></MemoryGrantInfo>
                        <OptimizerHardwareDependentProperties EstimatedAvailableMemoryGrant="64204"
                            EstimatedPagesCached="40128" EstimatedAvailableDegreeOfParallelism="5"
                            MaxCompileMemory="3343920"></OptimizerHardwareDependentProperties>
                        <OptimizerStatsUsage>
                            <StatisticsInfo LastUpdate="2025-11-21T09:42:50.32"
                                ModificationCount="0" SamplingPercent="100"
                                Statistics="[IX_EXPLRE_Covering]"
                                Table="[#EXPLRE_____________________________________________________________________________________________________________000000000011]"
                                Schema="[dbo]" Database="[tempdb]"></StatisticsInfo>
                        </OptimizerStatsUsage>
                        <RelOp NodeId="0" PhysicalOp="Index Seek" LogicalOp="Index Seek"
                            EstimateRows="9999" EstimatedRowsRead="9999" EstimateIO="0.0512731"
                            EstimateCPU="0.0111559" AvgRowSize="167"
                            EstimatedTotalSubtreeCost="0.062429" TableCardinality="20000"
                            Parallel="0" EstimateRebinds="0" EstimateRewinds="0"
                            EstimatedExecutionMode="Row">
                            <OutputList>
                                <ColumnReference Database="[tempdb]" Schema="[dbo]"
                                    Table="[#EXPLRE]" Column="val"></ColumnReference>
                                <ColumnReference Database="[tempdb]" Schema="[dbo]"
                                    Table="[#EXPLRE]" Column="description"></ColumnReference>
                                <ColumnReference Database="[tempdb]" Schema="[dbo]"
                                    Table="[#EXPLRE]" Column="category"></ColumnReference>
                            </OutputList>
                            <IndexScan Ordered="1" ScanDirection="FORWARD" ForcedIndex="0"
                                ForceSeek="0" ForceScan="0" NoExpandHint="0" Storage="RowStore">
                                <DefinedValues>
                                    <DefinedValue>
                                        <ColumnReference Database="[tempdb]" Schema="[dbo]"
                                            Table="[#EXPLRE]" Column="val"></ColumnReference>
                                    </DefinedValue>
                                    <DefinedValue>
                                        <ColumnReference Database="[tempdb]" Schema="[dbo]"
                                            Table="[#EXPLRE]" Column="description"></ColumnReference>
                                    </DefinedValue>
                                    <DefinedValue>
                                        <ColumnReference Database="[tempdb]" Schema="[dbo]"
                                            Table="[#EXPLRE]" Column="category"></ColumnReference>
                                    </DefinedValue>
                                </DefinedValues>
                                <Object Database="[tempdb]" Schema="[dbo]" Table="[#EXPLRE]"
                                    Index="[IX_EXPLRE_Covering]" IndexKind="NonClustered"
                                    Storage="RowStore"></Object>
                                <SeekPredicates>
                                    <SeekPredicateNew>
                                        <SeekKeys>
                                            <EndRange ScanType="LT">
                                                <RangeColumns>
                                                    <ColumnReference Database="[tempdb]"
                                                        Schema="[dbo]" Table="[#EXPLRE]"
                                                        Column="val"></ColumnReference>
                                                </RangeColumns>
                                                <RangeExpressions>
                                                    <ScalarOperator ScalarString="(10000)">
                                                        <Const ConstValue="(10000)"></Const>
                                                    </ScalarOperator>
                                                </RangeExpressions>
                                            </EndRange>
                                        </SeekKeys>
                                    </SeekPredicateNew>
                                </SeekPredicates>
                            </IndexScan>
                        </RelOp>
                    </QueryPlan>
                </StmtSimple>
            </Statements>
        </Batch>
    </BatchSequence>
</ShowPlanXML>