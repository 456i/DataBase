DECLARE @фирма NVARCHAR(40) = N'Луч';
DECLARE @общая_стоимость REAL;

SELECT @общая_стоимость = SUM(Цена_продажи * Количество) 
FROM Заказы 
WHERE Заказчик = @фирма;

PRINT N'Общая стоимость заказов фирмы ' + @фирма + N': ' + CAST(@общая_стоимость AS NVARCHAR);

DECLARE @товар NVARCHAR(40) = N'Стол';
DECLARE @закупочная_цена REAL, @средняя_цена_продажи REAL, @маржа REAL;

SELECT @закупочная_цена = Цена FROM Товары WHERE Наименование = @товар;
SELECT @средняя_цена_продажи = AVG(Цена_продажи) FROM Заказы WHERE Наименование_товара = @товар;
SET @маржа = @средняя_цена_продажи - @закупочная_цена;

PRINT N'Товар: ' + @товар;
PRINT N'Закупочная цена: ' + CAST(@закупочная_цена AS NVARCHAR);
PRINT N'Средняя цена продажи: ' + CAST(@средняя_цена_продажи AS NVARCHAR);
PRINT N'Маржа: ' + CAST(@маржа AS NVARCHAR);